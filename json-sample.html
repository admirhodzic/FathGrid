<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>FathGrid demo!</title>
    
    <!-- add jsPdf to enable PDF export -->
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.min.js"></script>


    <script src="fathgrid.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-lg-12 ">
            <h1>FathGrid with json data</h1>

            <div style="display: flex;">
              <div style="flex-grow: 1">Records per page: <select onchange="t1.setPageSize(this.value)"><option value="5">5</option><option selected value="10">10</option><option value="20">20</option><option value="50">50</option></select></div>
              <div style="flex-grow: 1">
                
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-default">Search</span>
                  </div>
                  <input onchange="t1.search(this.value)" type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
                </div>        
              </div>
            </div>
        
            <table  id="table1" class="table table-hover table-bordered ">       <thead class="thead-light"></thead> </table>
        
        </div>
      </div>
    </div>

  
    <script>
        var t1,users=[];
fetch('https://jsonplaceholder.typicode.com/users')
  .then(response => response.json())
  .then(json => {
    json.forEach(x=>users.push({value:x.id,name:x.name}));

    fetch('https://jsonplaceholder.typicode.com/posts')
      .then(response => response.json())
      .then(json => {

        t1=FathGrid("table1",{
          size:12,
          editable:true,
          onChange:function(data,col,old,value){console.log("onChange:",data.id,col,old,value);return value==''?false:true;},
          columns:[
              {editable:false, name:'id',header:"ID"},
              {
                name:'userId', 
                filter:users,
                listOfValues:users,
                value:function(item){return users.find(i=>i.value==item.userId).name;},
                header:'User'
              },
              {name:'title',header:'Title'},
              //{name:'body',header:'Text',type:'textarea'},
          ],
          data:json,
        });
    })

});

    
    </script>
  
  </body>
</html>



